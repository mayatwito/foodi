<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8">
  <title> 注住 住注</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <div class="container">
    <h2 class="page-title">  注住 住注</h2>

    <form method="post" action="/report" class="form-card" autocomplete="off">

      <!-- 驻 -->
      <div class="form-group">
        <label>驻:</label>
        <input
          type="text"
          id="phone"
          name="phone"
          inputmode="numeric"
          maxlength="10"
          placeholder=""
          required
        >
      </div>

      <!-- 住注 -->
      <div class="form-group">
        <label>专  转 砖 住注:</label>
        <input
          type="text"
          name="restaurant_name"
          list="restaurants_list"
          placeholder="转 拽  专 专砖"
          required
        >

        <datalist id="restaurants_list">
          {% for r in restaurants %}
            <option value="{{ r.name }}">
          {% endfor %}
        </datalist>
      </div>

      <!--  转 -->
      <div class="form-group">
        <label> 转 (拽转):</label>
        <input
          type="number"
          name="wait_minutes"
          min="0"
          placeholder=""
          required
        >
      </div>

      <!-- 拽转 驻 -->
      <div class="form-group">
        <label>拽转 驻 (驻爪):</label>
        <input
          type="number"
          name="available_seats"
          min="0"
          placeholder=""
        >
      </div>

      <button class="btn" type="submit">砖</button>
    </form>
  </div>

  <!-- 爪 驻 -->
  <script>
    const phone = document.getElementById("phone");

    // 住  拽
    phone.addEventListener("input", () => {
      phone.value = phone.value.replace(/[^0-9]/g, "").slice(0, 10);
    });

    // 住 拽
    phone.addEventListener("paste", (e) => {
      e.preventDefault();
      const text = (e.clipboardData || window.clipboardData).getData("text");
      phone.value = text.replace(/[^0-9]/g, "").slice(0, 10);
    });

    // 拽 砖
    document.querySelector(".form-card").addEventListener("submit", (e) => {
      if (!/^[0-9]{10}$/.test(phone.value)) {
        e.preventDefault();
        phone.focus();
        alert("住驻专 驻  转拽. 砖  10 住驻专转 .");
      }
    });
  </script>
</body>
</html>
